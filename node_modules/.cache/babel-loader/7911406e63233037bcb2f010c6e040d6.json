{"ast":null,"code":"var _jsxFileName = \"D:\\\\Documents\\\\6th semester\\\\Web Engineering\\\\Project\\\\Online Learning Platform\\\\frontend\\\\src\\\\components\\\\chatapp.jsx\";\nimport React, { Component, PropTypes, useState } from \"react\";\nimport \"./chatapp.css\";\nimport EmojiButton from \"@joeattardi/emoji-button\";\nimport Message from './message';\n\nclass Chatapp extends Component {\n  constructor() {\n    super();\n    this.state = {\n      user: \"Wellcome to Chat area\",\n      msg: \"\",\n      //your message value\n      reciveremail: \"\",\n      senderemail: \"\",\n      arr: [],\n      sendornot: true\n    };\n\n    this.passmsg = (email1 = 0) => {\n      this.setState({\n        reciveremail: email1\n      });\n      this.setState({\n        senderemail: JSON.parse(localStorage.getItem(\"jwt\")).user.id\n      });\n    };\n\n    this.historyuser = event => {\n      const user = {\n        email: '',\n        e1: JSON.parse(localStorage.getItem(\"jwt\")).user.id,\n        type: JSON.parse(localStorage.getItem(\"jwt\")).user.type\n      };\n      fetch(\"http://localhost:8082/search\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(user)\n      }).then(res => res.json()).then(res => {\n        console.log(res.code);\n        var temp = [];\n\n        for (var i = 0; i < res.code.length; i++) temp.push(res.code[i].reciever);\n\n        this.setState({\n          arr: temp\n        });\n      }); // this.setState({ reciveremail: event.target.value });\n    };\n\n    this.searchmail = () => {\n      alert(\"reciveremail : \" + this.state.reciveremail);\n    };\n\n    this.mymsgsend = this.mymsgsend.bind(this);\n    this.searhboxmail = this.searhboxmail.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this); // this.historyuser()\n  }\n\n  componentDidMount() {\n    this.historyuser();\n  }\n\n  mymsgsend(event) {\n    this.setState({\n      msg: event.target.value\n    });\n  }\n\n  searhboxmail(event) {\n    // console.log(this.state.reciveremail);\n    if (document.getElementById(\"searchinp\").value == \"\") this.historyuser();else {\n      const user = {\n        email: this.state.reciveremail,\n        e1: JSON.parse(localStorage.getItem(\"jwt\")).user.id,\n        type: JSON.parse(localStorage.getItem(\"jwt\")).user.type\n      };\n      fetch(\"http://localhost:8082/search\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(user)\n      }).then(res => res.json()).then(res => {\n        console.log(res.code);\n        var temp = [];\n\n        for (var i = 0; i < res.code.length; i++) {\n          if (JSON.parse(localStorage.getItem(\"jwt\")).user.type == \"teacher\") {\n            temp.push(res.code[i].semail);\n          } else {\n            temp.push(res.code[i].temail);\n          }\n        }\n\n        this.setState({\n          arr: temp\n        });\n\n        if (this.arr == null) {\n          console.log(this.state.arr); // this.historyuser();\n        }\n      });\n      this.setState({\n        reciveremail: event.target.value\n      });\n    }\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    const user = {\n      sender: JSON.parse(localStorage.getItem(\"jwt\")).user.id,\n      reciever: this.state.reciveremail,\n      message: this.state.msg\n    };\n    fetch(\"http://localhost:8082/addmsg\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(user)\n    }).then(res => res.json()).then(res => {\n      if (res.code === 1) {\n        alert(\"Message Added\");\n        this.setState({\n          reciveremail: user.reciever\n        });\n      } else alert(\"Message Not Added\");\n    }); // if(this.state.arr==null)\n    // {\n    //   this.historyuser();\n    // }\n  }\n\n  //create function for get id and search use reciver id present in state\n  //create function for post msg use reciver sender and msg state\n  render() {\n    window.addEventListener(\"DOMContentLoaded\", () => {\n      const button = document.querySelector(\"#emoji-button\");\n      const picker = new EmojiButton();\n      picker.on(\"emoji\", emoji => {\n        document.getElementById(\"inputvalue\").value += emoji;\n        var newval = document.getElementById(\"inputvalue\").value;\n        this.setState({\n          msg: newval\n        });\n      });\n      button.addEventListener(\"click\", () => {\n        picker.togglePicker(button);\n      });\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        background: \"rgb(26, 157, 199)\",\n        padding: \"20px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row myconta\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12 col-md-4\",\n      id: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      style: {\n        padding: \"10px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      onChange: this.searhboxmail,\n      className: \"form-control\",\n      placeholder: \"search\",\n      id: \"searchinp\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group-append\",\n      onClick: () => {\n        this.searchmail();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"input-group-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-search\",\n      \"aria-hidden\": \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 23\n      }\n    })))), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12 mt-4\",\n      style: {\n        height: \"550px\",\n        overflow: \"scroll\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 17\n      }\n    }, this.state.arr.map(i => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"listprofile\",\n        onClick: () => {\n          this.passmsg(i);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 50\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: \"https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcQtFb5KR5e9qSqvLmU94XSIFrHKVhcJolh-vUdnvY0A7sVOJoLd&usqp=CAU\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 19\n        }\n      }), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 19\n        }\n      }, i));\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12 col-md-8\",\n      id: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Message, {\n      reciver: this.state.reciveremail,\n      sender: this.state.senderemail,\n      sendornot: this.state.sendornot,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"msgbox\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group\",\n      style: {\n        padding: \"10px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group-prepend\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"input-group-text\",\n      id: \"emoji-button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"far fa-smile\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 23\n      }\n    }))), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      id: \"inputvalue\",\n      value: this.state.msg,\n      onChange: this.mymsgsend,\n      placeholder: \"Type a message\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"input-group-append\",\n      onClick: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"input-group-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fa fa-paper-plane\",\n      \"aria-hidden\": \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 23\n      }\n    })))))))));\n  }\n\n}\n\nexport default Chatapp;","map":{"version":3,"sources":["D:/Documents/6th semester/Web Engineering/Project/Online Learning Platform/frontend/src/components/chatapp.jsx"],"names":["React","Component","PropTypes","useState","EmojiButton","Message","Chatapp","constructor","state","user","msg","reciveremail","senderemail","arr","sendornot","passmsg","email1","setState","JSON","parse","localStorage","getItem","id","historyuser","event","email","e1","type","fetch","method","headers","body","stringify","then","res","json","console","log","code","temp","i","length","push","reciever","searchmail","alert","mymsgsend","bind","searhboxmail","handleSubmit","componentDidMount","target","value","document","getElementById","semail","temail","preventDefault","sender","message","render","window","addEventListener","button","querySelector","picker","on","emoji","newval","togglePicker","background","padding","height","overflow","map"],"mappings":"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","sourcesContent":["import React, { Component, PropTypes ,useState } from \"react\";\nimport \"./chatapp.css\";\nimport EmojiButton from \"@joeattardi/emoji-button\";\nimport Message from './message'\n\nclass Chatapp extends Component {\n  state = {\n    user: \"Wellcome to Chat area\",\n    msg: \"\", //your message value\n    reciveremail: \"\",\n    senderemail: \"\",\n    arr:[],\n    sendornot:true\n  };\n  constructor() {\n    super();\n    this.mymsgsend = this.mymsgsend.bind(this);\n    this.searhboxmail = this.searhboxmail.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    // this.historyuser()\n    \n  }\n  componentDidMount(){\n    this.historyuser();\n  }\n  passmsg = (email1 = 0) => {\n    this.setState({ reciveremail: email1 });\n    this.setState({ senderemail: JSON.parse(localStorage.getItem(\"jwt\")).user.id,})\n  };\n  \n\n  mymsgsend(event) {\n    this.setState({ msg: event.target.value });\n  }\n  searhboxmail(event) {\n    \n    // console.log(this.state.reciveremail);\n    if(document.getElementById(\"searchinp\").value==\"\")\n    this.historyuser();\n    else\n    {\n      const user={\n      email:this.state.reciveremail,\n      e1:JSON.parse(localStorage.getItem(\"jwt\")).user.id,\n      type:JSON.parse(localStorage.getItem(\"jwt\")).user.type\n    }\n    fetch(\"http://localhost:8082/search\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(user)\n      })\n    .then(res=> res.json())\n      .then(res => {\n         console.log(res.code)\n        var temp=[];\n        for(var i=0;i<res.code.length;i++)\n        {\n        if(JSON.parse(localStorage.getItem(\"jwt\")).user.type==\"teacher\")\n        {\n        temp.push(res.code[i].semail);\n        }\n        else\n        {\n        temp.push(res.code[i].temail);\n        }\n        }\n        this.setState({arr:temp})\n        if(this.arr==null)\n    {\n      console.log(this.state.arr)\n      // this.historyuser();\n    }\n      })\n    this.setState({ reciveremail: event.target.value });\n    \n    }\n  }\n\n  historyuser=(event)=> {\n    const user={\n      email:'',\n      e1:JSON.parse(localStorage.getItem(\"jwt\")).user.id,\n      type:JSON.parse(localStorage.getItem(\"jwt\")).user.type\n    }\n    fetch(\"http://localhost:8082/search\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(user)\n      })\n    .then(res=> res.json())\n      .then(res => {\n         console.log(res.code)\n         var temp=[];\n        for(var i=0;i<res.code.length;i++)\n        temp.push(res.code[i].reciever);\n        this.setState({arr:temp})\n      })\n    // this.setState({ reciveremail: event.target.value });\n  }\n\n  \n  handleSubmit(event) {\n    event.preventDefault();\n    const user={\n      sender:JSON.parse(localStorage.getItem(\"jwt\")).user.id,\n      reciever:this.state.reciveremail,\n      message:this.state.msg\n    }\n    fetch(\"http://localhost:8082/addmsg\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(user)\n      })\n    .then(res=> res.json())\n      .then(res => {\n        if(res.code===1)\n        {\n        alert(\"Message Added\");\n        this.setState({reciveremail:user.reciever})\n        }\n        else\n        alert(\"Message Not Added\");\n      })\n      // if(this.state.arr==null)\n      // {\n      //   this.historyuser();\n      // }\n\n  }\n  searchmail = () => {\n   \n   alert(\"reciveremail : \" + this.state.reciveremail);\n  };\n\n  //create function for get id and search use reciver id present in state\n  //create function for post msg use reciver sender and msg state\n\n  render() {\n    window.addEventListener(\"DOMContentLoaded\", () => {\n      const button = document.querySelector(\"#emoji-button\");\n      const picker = new EmojiButton();\n\n      picker.on(\"emoji\", (emoji) => {\n        document.getElementById(\"inputvalue\").value += emoji;\n        var newval = document.getElementById(\"inputvalue\").value;\n        this.setState({ msg: newval });\n      });\n      button.addEventListener(\"click\", () => {\n        picker.togglePicker(button);\n      });\n    });\n    \n    return (\n      <div style={{background:\"rgb(26, 157, 199)\" , padding:\"20px\"}}>\n        <div className=\"container\">\n          <div className=\"row myconta\">\n            <div className=\"col-12 col-md-4\" id=\"left\">\n              <div className=\"row\">\n                \n                <div className=\"input-group\" style={{ padding: \"10px\" }}>\n                  {/* search reciver mail */}\n                  <input\n                    type=\"text\"\n                    onChange={this.searhboxmail}\n                    className=\"form-control\"\n                    placeholder=\"search\"\n                    id=\"searchinp\"\n                  />\n                  <div\n                    className=\"input-group-append\"\n                    onClick={() => {\n                      this.searchmail();\n                    }}\n                  >\n                    <span className=\"input-group-text\">\n                      <i className=\"fa fa-search\" aria-hidden=\"true\"></i>\n                    </span>\n                  </div>\n                </div>\n                <hr/>\n\n                <div\n                  className=\"col-12 mt-4\"\n                  style={{ height: \"550px\", overflow: \"scroll\" }}\n                >\n                {this.state.arr.map((i)=>{return <div\n                  className=\"listprofile\"\n                  onClick={() => {\n                    this.passmsg(i);\n                  }}\n                >\n                  <img src=\"https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcQtFb5KR5e9qSqvLmU94XSIFrHKVhcJolh-vUdnvY0A7sVOJoLd&usqp=CAU\" />\n                  <p>{i}</p>\n                </div>\n                })}\n\n                </div>\n              </div>\n            </div>\n            <div className=\"col-12 col-md-8\" id=\"right\">\n              <div>\n                <Message reciver={this.state.reciveremail} sender={this.state.senderemail} sendornot={this.state.sendornot} />\n                \n              </div>\n              <div className=\"msgbox\">\n                <div className=\"input-group\" style={{ padding: \"10px\" }}>\n                  <div className=\"input-group-prepend\">\n                    <span className=\"input-group-text\" id=\"emoji-button\">\n                      <i className=\"far fa-smile\"></i>\n                    </span>\n                  </div>\n\n                  <input\n                    type=\"text\"\n                    className=\"form-control\"\n                    id=\"inputvalue\"\n                    value={this.state.msg}\n                    onChange={this.mymsgsend}\n                    placeholder=\"Type a message\"\n                  />\n\n                  <div className=\"input-group-append\" onClick={this.handleSubmit}>\n                    <span className=\"input-group-text\">\n                      <i className=\"fa fa-paper-plane\" aria-hidden=\"true\"></i>\n                    </span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Chatapp;\n"]},"metadata":{},"sourceType":"module"}